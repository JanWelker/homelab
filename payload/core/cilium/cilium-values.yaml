# Cilium v1.18.5 Helm values
# Install: helm upgrade cilium cilium/cilium --version 1.18.5 -n kube-system -f cilium-values.yaml

ipam:
  mode: kubernetes

# Explicitly set device to avoid auto-detection issues
devices: "en+"

kubeProxyReplacement: true
k8sServiceHost: 10.9.2.1
k8sServicePort: 6443

prometheus:
  enabled: true
  serviceMonitor:
    enabled: true

operator:
  replicas: 1
  prometheus:
    enabled: true
    serviceMonitor:
      enabled: true

ingressController:
  enabled: true
  loadbalancerMode: shared
  default: true
  enforceHttps: true

l2announcements:
  enabled: true

k8sClientRateLimit:
  qps: 50
  burst: 200

encryption:
  enabled: true
  type: wireguard

hubble:
  enabled: true
  metrics:
    enabled:
      - dns
      - drop
      - tcp
      - flow
      - port-distribution
      - icmp
      - http
  relay:
    enabled: true
  ui:
    enabled: true
    ingress:
      enabled: true
      className: cilium
      hosts:
        - hubble.k8s.wlkr.ch
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-prod
      tls:
        - secretName: hubble-ui-tls
          hosts:
            - hubble.k8s.wlkr.ch
